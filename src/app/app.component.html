<div class="container">
  <div class="card my-2">
    <div class="card-body">
      <h5 class="card-title small">Training Possibility</h5>

      <div class="row">
        <div class="input-group input-group-sm mt-1 mb-1">
          <span class="input-group-text">Quality</span>
          <select [(ngModel)]="trainingQuality" class="form-select" style="width:auto;">
            <option *ngFor="let item of TrainingQuality.ALL" [value]="item.name">
              {{ item.name }}
            </option>
          </select>
        </div>
        <div class="fatigue input-group input-group-sm mb-1">
          <button (click)="fatiguee=0" [class.bg-primary]="fatiguee == 0" class="fatigue btn btn-outline-primary"
                  type="button">
            <img alt="f0" src="assets/fatigue/Fatigue0.webp">
          </button>
          <button (click)="fatiguee=1" [class.bg-secondary]="fatiguee == 1" class="fatigue btn btn-outline-secondary"
                  type="button">
            <img alt="f1" src="assets/fatigue/Fatigue1.webp">
            <img alt="f2" src="assets/fatigue/Fatigue2.webp">
            <img alt="f3" src="assets/fatigue/Fatigue3.webp">
            <img alt="f4" src="assets/fatigue/Fatigue4.webp">
            <img alt="f5" src="assets/fatigue/Fatigue5.webp">
          </button>
          <button (click)="fatiguee=51" [class.bg-warning]="fatiguee == 51" class="fatigue btn btn-outline-warning"
                  type="button">
            <img alt="f6" src="assets/fatigue/Fatigue6.webp">
            <img alt="f7" src="assets/fatigue/Fatigue7.webp">
            <img alt="f8" src="assets/fatigue/Fatigue8.webp">
            <img alt="f9" src="assets/fatigue/Fatigue9.webp">
            <img alt="f10" src="assets/fatigue/Fatigue10.webp">
          </button>
          <button (click)="fatiguee=100" [class.bg-danger]="fatiguee == 100" class="fatigue btn btn-outline-danger"
                  type="button">
            <img alt="f10" src="assets/fatigue/Fatigue10.webp">
          </button>
        </div>
        <div class="input-group input-group-sm mb-1">
          <input [value]="trainingTask.name"
                 class="form-control text-primary bg-white border-primary-subtle text-center" disabled readonly
                 type="text">
        </div>


        <div class="btn-group-sm flex-container mt-2 mb-3">
          <span class="btn d-inline-block text-center">
            <fa-icon (click)="toPreviousRarity()" [icon]="faMinus"></fa-icon>
          </span>
          <div class="progress-stacked flex-fill">
            <div [style]="numberToWidthStyle(percentReach)" aria-label="Current TP"
                 class="progress" role="progressbar">
              <div [class.progress-bar-animated]="getTotalStatUsed() != totalTrainingPoint"
                   [class.progress-bar-striped]="getTotalStatUsed() != totalTrainingPoint"
                   class="progress-bar bg-success progress-bar-striped">
                <span *ngIf="crispr == Crispr.NONE">{{ getTotalStatUsed() }} / {{ baseTrainingPoint }}</span>
                <span *ngIf="crispr != Crispr.NONE">{{ getTotalStatUsed() }} / {{ baseTrainingPoint }}
                  +{{ crispr.additionTp }}</span>
              </div>
            </div>
          </div>
          <div class="progress-stacked ms-2">
            <div (click)="crispr = Crispr.NONE" class="progress" role="" style="width: 80%">
              <div [class.bg-primary]="crispr == Crispr.NONE"
                   [class.bg-secondary-subtle]="crispr != Crispr.NONE"
                   [class.text-black]="crispr != Crispr.NONE"
                   class="progress-bar ps-2 pe-1"
              >
                {{ Crispr.NONE.name }}
              </div>
            </div>
            <div (click)="crispr = Crispr.BRONZE" class="progress" role="progressbar" style="width: 80%">
              <div [class.bg-success-subtle]="crispr != Crispr.BRONZE"
                   [class.bg-success]="crispr == Crispr.BRONZE"
                   [class.text-black]="crispr != Crispr.BRONZE"
                   class="progress-bar bg-success-subtle text-black ps-1 pe-1">
                {{ Crispr.BRONZE.name }}
              </div>
            </div>
            <div (click)="crispr = Crispr.SILVER" class="progress" role="progressbar" style="width: 80%">
              <div [class.bg-warning-subtle]="crispr != Crispr.SILVER"
                   [class.bg-warning]="crispr == Crispr.SILVER"
                   [class.text-black]="crispr != Crispr.SILVER"
                   class="progress-bar  text-black ps-1 pe-2">
                {{ Crispr.SILVER.name }}
              </div>
            </div>
          </div>

          <span class="input-group-text btn d-inline-block text-center">
            <fa-icon (click)="toNextRarity()" [icon]="faPlus"></fa-icon>
          </span>
        </div>

        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.HP, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.HP)"
                          [is_main_stat]="(trainingTask.mainStat == Stat.HP)"
                          [maximum_possibility]="maximumPossibility.hp"
                          [minimum_possibility]="minimumPossibility.hp"
                          [stat]="Stat.HP"
                          [training_effect]="trainingTask.statsEffective.hp">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.ATK, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.ATK)"
                          [is_main_stat]="trainingTask.mainStat == Stat.ATK"
                          [maximum_possibility]="maximumPossibility.atk"
                          [minimum_possibility]="minimumPossibility.atk"
                          [stat]="Stat.ATK"
                          [training_effect]="trainingTask.statsEffective.atk">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.RPR, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.RPR)"
                          [is_main_stat]="trainingTask.mainStat == Stat.RPR"
                          [maximum_possibility]="maximumPossibility.rpr"
                          [minimum_possibility]="minimumPossibility.rpr"
                          [stat]="Stat.RPR"
                          [training_effect]="trainingTask.statsEffective.rpr">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.ABL, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.ABL)"
                          [is_main_stat]="trainingTask.mainStat == Stat.ABL"
                          [maximum_possibility]="maximumPossibility.abl"
                          [minimum_possibility]="minimumPossibility.abl"
                          [stat]="Stat.ABL"
                          [training_effect]="trainingTask.statsEffective.abl">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.STA, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.STA)"
                          [is_main_stat]="trainingTask.mainStat == Stat.STA"
                          [maximum_possibility]="maximumPossibility.sta"
                          [minimum_possibility]="minimumPossibility.sta"
                          [stat]="Stat.STA"
                          [training_effect]="trainingTask.statsEffective.sta">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.PLT, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.PLT)"
                          [is_main_stat]="trainingTask.mainStat == Stat.PLT"
                          [maximum_possibility]="maximumPossibility.plt"
                          [minimum_possibility]="minimumPossibility.plt"
                          [stat]="Stat.PLT"
                          [training_effect]="trainingTask.statsEffective.plt">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.SCI, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.SCI)"
                          [is_main_stat]="trainingTask.mainStat == Stat.SCI"
                          [maximum_possibility]="maximumPossibility.sci"
                          [minimum_possibility]="minimumPossibility.sci"
                          [stat]="Stat.SCI"
                          [training_effect]="trainingTask.statsEffective.sci">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.ENG, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.ENG)"
                          [is_main_stat]="trainingTask.mainStat == Stat.ENG"
                          [maximum_possibility]="maximumPossibility.eng"
                          [minimum_possibility]="minimumPossibility.eng"
                          [stat]="Stat.ENG"
                          [training_effect]="trainingTask.statsEffective.eng">
        </app-stat-explain>
        <app-stat-explain (currentTrainingChangeRequested)="changeCurrentTraining(Stat.WPN, $event)"
                          (setTargetStatRequested)="targetStat = $event"
                          [current_training]="getStat(Stat.WPN)"
                          [is_main_stat]="trainingTask.mainStat == Stat.WPN"
                          [maximum_possibility]="maximumPossibility.wpn"
                          [minimum_possibility]="minimumPossibility.wpn"
                          [stat]="Stat.WPN"
                          [training_effect]="trainingTask.statsEffective.wpn">
        </app-stat-explain>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title small">HP Breakpoints</h5>

      <div class="row">
        <div class="input-group input-group-sm mb-1">
          <span class="btn d-inline text-center">
            <fa-icon (click)="decreaseBaseHp()" [icon]="faMinus"></fa-icon>
          </span>
          <div class="input-group-text border-0 bg-white col-1 justify-content-center">
            <span class="ms-2 me-1">{{ baseHp }}</span>
          </div>
          <span class="btn d-inline text-center">
            <fa-icon (click)="increaseBaseHp()" [icon]="faPlus"></fa-icon>
          </span>
        </div>
      </div>
      <div class="sm">
        <div class="input-group input-group-sm mb-1 small">
          <span *ngFor="let item of hpBreakpoints" class="my-1 mx-1">
            <span class="bg-success-subtle ps-1 pe-1">{{ item.hpAddition }}</span>
            <span class="bg-danger-subtle ps-1 pe-1 ">{{ item.tpAddition }}</span>
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small">2024 ~Kafka</div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small"><a
      href="https://docs.google.com/spreadsheets/d/17CXjmTTv3ZveNqDIEaJ8zN9TUqpD4_tYipAsS2-OcR0/">Excel version</a>
      (upgraded, no bug).
    </div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small">Thank you so much &#64;Tikkity for the original tool.</div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small">Thank you &#64;HSol the greatly <a href="https://youtu.be/7dG9xfpXZVQ">how to
      use</a>.
    </div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small">Deeply cheer &#64;TuVuong for whole dummy time that we shared.</div>
  </div>
  <div class="row">
    <div class="text-center mt-1 small">Many 🙏 for guys who destroyed his crew because of my mistake.</div>
  </div>
</div>
